<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

	<head>
		<title>Check Out</title>

		<link th:href="@{/css1/bootstrap.css}" rel="stylesheet">
		<link th:href="@{/css1/style.css}" rel="stylesheet" type="text/css" media="all" />
		<link rel="icon" th:href="@{/img1/favicon/favicon.html}" type="image/x-icon" />
		<link rel="apple-touch-icon-precomposed" sizes="144x144" th:href="@{/img1/favicon/apple-touch-icon-144x144-precomposed.html}">
		<link rel="apple-touch-icon-precomposed" sizes="72x72" th:href="@{/img1/favicon/apple-touch-icon-72x72-precomposed.html}">
		<link rel="apple-touch-icon-precomposed" th:href="@{/img1/favicon/apple-touch-icon-precomposed.html}">
		<link rel="stylesheet" th:href="@{/css1/minified.css}">
		<link rel="stylesheet" th:href="@{/css1/owl.carousel.css}">
		<link rel="stylesheet" th:href="@{/css1/owl.theme.css}">
		<link th:href="@{/css1/flexslider.css}" rel="stylesheet" />
		<link rel="stylesheet" th:href="@{/css1/responsive.css}">
		<script th:src="@{/js1/modernizr.min.js}"></script>	
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="Favorites Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
		Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
		<script type="application/x-javascript">
			addEventListener("load", function() {
				setTimeout(hideURLbar, 0);
			}, false);

			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		</script>
		<script type="text/javascript" th:src="@{/js1/jquery.min.js}"></script>
		<script th:src="@{/js1/simpleCart.min.js}">
		</script>
		<script type="text/javascript" th:src="@{/js1/move-top.js}"></script>
		<script type="text/javascript" th:src="@{/js1/easing.js}"></script>
		<script type="text/javascript" th:src="@{/js1/bootstrap.min.js}"></script>
		<script th:src="@{/js1/minified.js}"></script>
		<script th:src="@{/js1/owl.carousel.js}"></script>
		<script th:src="@{/js1/jquery.flexslider-min.js}"></script>
		<script type="text/javascript">
			jQuery(document).ready(function($) {
				$(".scroll").click(function(event) {
					event.preventDefault();
					$('html,body').animate({
						scrollTop: $(this.hash).offset().top
					}, 1000);
				});
			});
		</script>
		<!-- start-smoth-scrolling -->
		<style>
			.cart-sec {
				border-bottom: 0px dotted #000;
				padding: 0px 0;
			}
			.input-icon >i{
				margin-left: 10px;
				margin-top: -5px;	
			}
			.btn-default.active, .btn-default:active, .btn-default:focus, .btn-default:hover {
			    background: red;
			    color: #fff;
			}
		</style>
	</head>

	<body id="home">
		<div id="page-wrapper">
		<header id="site-header" role="banner">
		<!-- HEADER TOP -->
		<div class="header-top">
			<div class="container">
				<div class="row">
					<div class="col-xs-12 col-sm-6 col-md-7">
						<!-- CONTACT INFO -->
						<div class="contact-info">
							<i class="iconfont-headphones round-icon"></i>
							<strong>+444 (100) 1234</strong>
							<span>(周一- 周五: 09.00 - 21.00)</span>
							</div>
						<!-- // CONTACT INFO -->
					</div>
					<div class="col-xs-12 col-sm-6 col-md-5">
						<ul class="actions unstyled clearfix">
							<li>
								<!-- SEARCH BOX -->
								<div class="search-box">
									<form action="#" method="post">
										<div class="input-iconed prepend">
											<button class="input-icon"><i class="iconfont-search"></i></button>
											<label for="input-search" class="placeholder">在这里搜索</label>
											<input type="text" name="q" id="input-search" class="round-input full-width" required />
										</div>
									</form>
								</div>
								<!-- // SEARCH BOX -->
							</li>
							<li data-toggle="sub-header" data-target="#sub-social">
								<!-- SOCIAL ICONS -->
								<a href="javascript:void(0);" id="social-icons">
									<i class="iconfont-share round-icon"></i>
								</a>
								
								<div id="sub-social" class="sub-header">
									<ul class="social-list unstyled text-center">
										<li><a href="#"><i class="iconfont-facebook round-icon"></i></a></li>
										<li><a href="#"><i class="iconfont-twitter round-icon"></i></a></li>
										<li><a href="#"><i class="iconfont-google-plus round-icon"></i></a></li>
										<li><a href="#"><i class="iconfont-pinterest round-icon"></i></a></li>
										<li><a href="#"><i class="iconfont-rss round-icon"></i></a></li>
									</ul>
								</div>
								<!-- // SOCIAL ICONS -->
							</li>
							<li data-toggle="sub-header" data-target="#sub-cart">
								<!-- SHOPPING CART -->
								<a href="javascript:void(0);" id="total-cart">
									<i class="iconfont-shopping-cart round-icon"></i>
								</a>
								
								<div id="sub-cart" class="sub-header">
									<div class="cart-header">
										<span>你的购物车是空的</span>
										<small><a href="cart.html">(See All)</a></small>
									</div>
									<ul class="cart-items product-medialist unstyled clearfix"></ul>
									<div class="cart-footer">
										<div class="cart-total clearfix">
											<span class="pull-left uppercase">总计</span>
											<span class="pull-right total">￥ 0</span>
										</div>
										<div class="text-right">
											<a href="cart.html" class="btn btn-default btn-round view-cart">查看</a>
										</div>
									</div>
								</div>
								<!-- // SHOPPING CART -->
							</li>
						</ul>
					</div>
				</div>
			</div>
			
			<!-- ADD TO CART MESSAGE -->
			<div class="cart-notification">
				<ul class="unstyled"></ul>
			</div>
			<!-- // ADD TO CART MESSAGE -->
		</div>
		<!-- // HEADER TOP -->
		<!-- MAIN HEADER -->
		<div class="main-header-wrapper">
			<div class="container">
				<div class="main-header">
					<!-- CURRENCY / LANGUAGE / USER MENU -->
					<div class="actions">
						<div class="center-xs">
							<!-- CURRENCY -->
							<ul class="option-list unstyled">
								<li class="active"><a href="#" data-toggle="tooltip" title="人民币">￥</a></li>
								<li><a href="#" data-toggle="tooltip" title="GBP - British Pound">£</a></li>
								<li><a href="#" data-toggle="tooltip" title="EUR - Euro">€</a></li>
							</ul>
							<!-- // CURRENCY -->
							<!-- LANGUAGES -->
							<ul class="option-list unstyled">
								<li class="active"><a href="#" data-toggle="tooltip" title="中文">CH</a></li>
								<li><a href="#" data-toggle="tooltip" title="French">FR</a></li>
								<li><a href="#" data-toggle="tooltip" title="Deutsch">DE</a></li>
							</ul>
							<!-- // LANGUAGES -->
						</div>
						<div class="clearfix"></div>
						<!-- USER RELATED MENU -->
						<nav id="tiny-menu" class="clearfix">
							<ul class="user-menu">
								<li><a href="Person.html">我的账户</a></li>
								<li><a href="Person.html">查看</a></li>
								<li><a href="login-page.html">登出</a></li>
							</ul>
						</nav>
						<!-- // USER RELATED MENU -->
					</div>
					<!-- // CURRENCY / LANGUAGE / USER MENU -->
					<!-- SITE LOGO -->
					<div class="logo-wrapper">
						<a href="index-2.html" class="logo" title="GFashion - Responsive e-commerce HTML Template">
							<img th:src="@{/images/logo2.png}" alt="Logo" />
						</a>
					</div>
					<!-- // SITE LOGO -->
					<!-- SITE NAVIGATION MENU -->
					<nav id="site-menu" role="navigation">
						<ul class="main-menu hidden-sm hidden-xs">
							<li class="active">
								<a href="pagehome.html">首页</a>
							</li>
							<li>
								<a href="productList.html">活动</a>
							</li>
							<li>
								<a href="menu1.html">餐饮</a>
							</li>
							<li>
								<a href="hotel.html">住宿</a>
							</li>
							
							<li>	
								<a href="Person.html">个人中心</a>
							</li>
						</ul>
						</nav>
					<!-- // SITE NAVIGATION MENU -->
				</div>
			</div>
		</div>
		<!-- // MAIN HEADER -->
	</header>

		<div id="wrapper-outer">
			<div id="wrapper">
				<div id="wrapper-inner">
					<div id="content">
						<div class="map-wrapper">
							<div class="map">
								<div id="map" class="map-inner"></div>
								<div class="cart-items">
										<div class="container">
											<h1>我的订单</h1>
											<ul class="list-group">
												<li class="list-group-item" th:each="item , stack : ${list}">
													<div class="panel panel-success">
														<!-- Default panel contents -->
														
														<ul class="list-group">
															<li class="list-group-item">
																<div class="cart-header">
																	<div class="cart-sec simpleCart_shelfItem">
																		<div class="cart-item cyc">
																			<img th:src="${item.room.url}" class="img-responsive" style="width: 215px; height: 133px;" alt="">
																		</div>
																		<div class="row">
																			<div class="col-md-3">
																				<div class="cart-item-info row">
																					<div>房间名称：<span  th:text="${item.room.rname}" style="color: red;"></span></div>
																					<div>开始时间：<span th:text="${#dates.format(item.begintime, 'yyyy-MM-dd')}"></span></div>
																					<div>结束时间：<span th:text="${#dates.format(item.endtime, 'yyyy-MM-dd')}"></span></div>
																					<div>位置：<span th:text="${item.room.location}"></span></div>
																					<div>价格：<span class="dj" th:text="${item.room.price}"></span></div>
																					<div>状态：<span class="zt" th:if="${item.room.state == '1'}" th:text="可租"  style="color: red;"></span><span class="zt" th:if="${item.room.state == '2'}" th:text="不可租" style="color: red;"></span></div>
																				</div>
																			</div>
																			<div class="col-md-5 col-md-offset-1">
																				<span style="color: red;">房屋介绍：</span>
																				<div th:text="${item.room.introduce}">
																					
																				</div>
																			</div>
																			<div class="clearfix">
							
																			</div>
																		</div>
							
																	</div>
																</div>
															</li>
															
														</ul>
														<div class="panel-footer" style="height: 70px;line-height: 50px;margin-top: -8px;">															
														<div style="float: right;">
																<span style="position: absolute; left: 50px;bottom:30px;font-size:16px ;" class="del"><a th:href="@{/room/deletedingdan(id=${item.id})}" style="color: black;">取消订单</a></span>
																<button type="button" class="dg btn-default btn-lg" style="margin-left: 50px;margin-top: 5px; " data-target="#md" data-toggle="modal">
																   马上付款
																</button>
																<input type="hidden" th:value="${item.room.id}">
																<input type="hidden" th:value="${item.room.rname}">
																<input type="hidden" th:value="${#dates.format(item.begintime, 'yyyy-MM-dd')}">
																<input type="hidden" th:value="${#dates.format(item.endtime, 'yyyy-MM-dd')}">
																<input type="hidden" th:value="${item.room.price}">
																<input type="hidden" th:value="${item.id}">
																<input type="hidden" th:value="${item.room.state}">
															</div>
														</div>
													</div>
												</li>
												
												
												<li class="list-group-item" style="height: 100px;">
													<div style="float: right;">
														
														<h3>订单总价：<span style="color: red;" id="zongjia"></span></h4>
														<div>
																<button type="button" class="qb btn-default btn-lg" style="margin-top: -15px;margin-left: 38px;" data-target="#md" data-toggle="modal">
																   全部付款
																</button>
														</div>
													</div>
												</li>
											</ul>
											
										</div>
										

										<a href="#" id="toTop" style="display: block;"> <span id="toTopHover" style="opacity: 1;"> </span></a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<div class="modal fade" id="md" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<form th:action="@{/room/roomaddorder}">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">确认订单</h4>
					</div>
					<div class="modal-body">
						<div class="input-group">
							
							<table class="table" style="text-align: center;">
							  <thead>
							  <tr>
							  	<td>描述</td>
							  	<td>开始时间</td>
							  	<td>结束时间</td>
							  	<td>价格</td>
							  	</tr>
							  </thead>
							  <tbody id="tbo">
							  	
							  </tbody>
							</table>
							请确认生成订单类型：<select name="lx">
					     		<option value="1">个人</option>
					     		<option value="2">团队</option>
					     					</select>
						</div>
						<!-- /input-group -->
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
						<input type="submit" class="btn btn-primary" value="确认">
					</div>
					</form>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
	
		<script type="text/javascript">
				
				
		        
				
				
				$(function(){
				
					
					$(".del").click(function(){
						var res = confirm("确定要删除吗？");
						if(res==true){
							
						}else{
							return false;
						}
					})
					
					var dj=0.0;
					dj=parseFloat(dj);
					$(".dj").each(function(){
						var price=$(this).text();
						dj+=parseFloat(price);
					})
					$("#zongjia").html(dj.toFixed(1));
				
					$(".dg").click(function(){
						$("#tbo").html("");
						var id=$(this).next().val();
						var rname=$(this).next().next().val();
						var btime=$(this).next().next().next().val();
						var etime=$(this).next().next().next().next().val();
						var price=$(this).next().next().next().next().next().val();
						var rid=$(this).next().next().next().next().next().next().val();
						var type=$(this).next().next().next().next().next().next().next().val();
						if(type==2){
							alert("该房已维修！")
							return false;
						}
						var tr=$("<tr><td>"+rname+"</td><td>"+btime+"</td><td>"+etime+"</td><td>"+price+"</td><td style='display:none'><input value="+id+" name='id'></td><td style='display:none'><input value="+rid+" name='rid'></td></tr>");
						$("#tbo").append(tr);
						
					})
					
					$(".qb").click(function(){
						$("#tbo").html("");
						$(".dg").each(function(i,obj){
							var id=$(obj).next().val();
							var rname=$(obj).next().next().val();
							var btime=$(obj).next().next().next().val();
							var etime=$(obj).next().next().next().next().val();
							var price=$(obj).next().next().next().next().next().val();
							var rid=$(obj).next().next().next().next().next().next().val();
							var type=$(obj).next().next().next().next().next().next().next().val();
							if(type==1){
								var tr=$("<tr><td>"+rname+"</td><td>"+btime+"</td><td>"+etime+"</td><td>"+price+"</td><td style='display:none'><input value="+id+" name='id'></td><td style='display:none'><input value="+rid+" name='rid'></td></tr>")
								$("#tbo").append(tr);
							}
							
						})
					})
				
				})
				
				
				
		</script>
		
	</body>
</html>